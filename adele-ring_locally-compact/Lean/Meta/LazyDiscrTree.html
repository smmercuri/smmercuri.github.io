<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Meta.LazyDiscrTree</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Meta.LazyDiscrTree";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Lean/Meta/CompletionName.html">Lean.Meta.CompletionName</a></li><li><a href="../.././Lean/Meta/DiscrTree.html">Lean.Meta.DiscrTree</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Meta.LazyDiscrTree" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchClone.instInhabitedKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">instInhabitedKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchClone.instBEqKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">instBEqKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchClone.instReprKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">instReprKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchClone.Key.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">Key</span>.<span class="name">hash</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchClone.Key.instHashableKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">Key</span>.<span class="name">instHashableKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instEmptyCollectionTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedLazyDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedLazyDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.getMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">getMatch</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedPreDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.PreDiscrTree.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">append</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">instAppendPreDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitEntry.fromExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">fromExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">mkSubEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.Cache"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.Cache.empty"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span>.<span class="name">empty</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedInitResults</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitResults.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">append</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">instAppendInitResults</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.createImportedEnvironment"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedEnvironment</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.createImportedEnvironment.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedEnvironment</span>.<span class="name">go</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Lazy-Discrimination-Tree">Lazy Discrimination Tree <a class="hover-link" href="#Lazy-Discrimination-Tree">#</a></h1><p>This file defines a new type of discrimination tree optimized for rapid
population of imported modules for use in tactics.  It uses a lazy
initialization strategy.</p><p>The discrimination tree can be created through
<code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createImportedEnvironment">createImportedEnvironment</a></code>. This creates a discrimination tree from all
imported modules in an environment using a callback that provides the
entries as <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">InitEntry</a></code> values.</p><p>The function <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.getMatch">getMatch</a></code> can be used to get the values that match the
expression as well as an updated lazy discrimination tree that has
elaborated additional parts of the tree.</p></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchClone.instInhabitedKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L42-L42">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.instInhabitedKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">instInhabitedKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key">Lean.Meta.LazyDiscrTree.MatchClone.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.instInhabitedKey">Lean.Meta.LazyDiscrTree.MatchClone.instInhabitedKey</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key.const">Lean.Meta.LazyDiscrTree.MatchClone.Key.const</a> <span class="fn">default</span> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchClone.instBEqKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L42-L42">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.instBEqKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">instBEqKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#BEq">BEq</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key">Lean.Meta.LazyDiscrTree.MatchClone.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.instBEqKey">Lean.Meta.LazyDiscrTree.MatchClone.instBEqKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">beq</span> := <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.beqKey._@.Lean.Meta.LazyDiscrTree._hyg.99">Lean.Meta.LazyDiscrTree.MatchClone.beqKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchClone.instReprKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L42-L42">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.instReprKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">instReprKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key">Lean.Meta.LazyDiscrTree.MatchClone.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.instReprKey">Lean.Meta.LazyDiscrTree.MatchClone.instReprKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.reprKey._@.Lean.Meta.LazyDiscrTree._hyg.368">Lean.Meta.LazyDiscrTree.MatchClone.reprKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchClone.Key.hash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L47-L54">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.Key.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">Key</span>.<span class="name">hash</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key">Lean.Meta.LazyDiscrTree.MatchClone.Key</a> → <a href="../.././Init/Prelude.html#UInt64">UInt64</a></span></div></div><p>Hash function</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.MatchClone.Key.hash" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchClone.Key.instHashableKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L56-L56">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.Key.instHashableKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchClone</span>.<span class="name">Key</span>.<span class="name">instHashableKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Hashable">Hashable</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key">Lean.Meta.LazyDiscrTree.MatchClone.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.Key.instHashableKey">Lean.Meta.LazyDiscrTree.MatchClone.Key.instHashableKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">hash</span> := <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchClone.Key.hash">Lean.Meta.LazyDiscrTree.MatchClone.Key.hash</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedTrie"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L294-L294">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">{<span class="fn">a</span> : <a href="../.././foundational_types.html">Type</a>} → <span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.Trie">Lean.Meta.LazyDiscrTree.Trie</a> <span class="fn">a</span></span>)</span></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instInhabitedTrie</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">values</span> := <span class="fn">default</span>, <span class="fn">star</span> := <span class="fn">default</span>, <span class="fn">children</span> := <span class="fn">default</span>, <span class="fn">pending</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L296-L296">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instEmptyCollectionTrie</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Core.html#EmptyCollection">EmptyCollection</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.Trie">Lean.Meta.LazyDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">emptyCollection</span> := <span class="fn">{ <span class="fn">values</span> := <span class="fn">#[]</span>, <span class="fn">star</span> := <span class="fn">0</span>, <span class="fn">children</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">pending</span> := <span class="fn">#[]</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L317-L323">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p><code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">LazyDiscrTree</a></code> is a variant of the discriminator tree datatype
<code>DiscrTree</code> in Lean core that is designed to be efficiently
initializable with a large number of patterns.  This is useful
in contexts such as searching an entire Lean environment for
expressions that match a pattern.</p><p>Lazy discriminator trees achieve good performance by minimizing
the amount of work that is done up front to build the discriminator
tree.  When first adding patterns to the tree, only the root
discriminator key is computed and processing the remaining
terms is deferred until demanded by a match.</p><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.mk"><li id="Lean.Meta.LazyDiscrTree.config" class="structure_field"><div class="structure_field_info">config : <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a></div><div class="structure_field_doc"><p>Configuration for normalization.</p></div></li><li id="Lean.Meta.LazyDiscrTree.tries" class="structure_field"><div class="structure_field_info">tries : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.Trie">Lean.Meta.LazyDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span></div><div class="structure_field_doc"><p>Backing array of trie entries.  Should be owned by this trie.</p></div></li><li id="Lean.Meta.LazyDiscrTree.roots" class="structure_field"><div class="structure_field_info">roots : <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap">Lean.HashMap</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key">Lean.Meta.LazyDiscrTree.MatchClone.Key</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.TrieIndex">Lean.Meta.LazyDiscrTree.TrieIndex</a></span></div><div class="structure_field_doc"><p>Map from discriminator trie roots to the index.</p></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedLazyDiscrTree"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L329-L330">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedLazyDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedLazyDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.getMatch"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L608-L609">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.getMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">getMatch</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span></span>)</span></span></div></div><p>Find values that match <code>e</code> in <code>d</code>.</p><p>The results are ordered so that the longest matches in terms of number of
non-star keys are first with ties going to earlier operators first.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.getMatch" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L620-L620">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedPreDiscrTree</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">{<span class="fn">a</span> : <a href="../.././foundational_types.html">Type</a>} → <span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">a</span></span>)</span></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">roots</span> := <span class="fn">default</span>, <span class="fn">tries</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.PreDiscrTree.append"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L644-L651">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PreDiscrTree.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">append</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(y : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span></span></div></div><p>Merge two discrimination trees.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.PreDiscrTree.append" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L653-L654">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">instAppendPreDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Append">Append</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span></span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">append</span> := <span class="fn">Lean.Meta.LazyDiscrTree.PreDiscrTree.append</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitEntry"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L660-L664">source</a></div><div class="attributes">@[reducible]</div>
<div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Initial entry in lazy discrimination tree</p><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.InitEntry.mk"><li id="Lean.Meta.LazyDiscrTree.InitEntry.key" class="structure_field"><div class="structure_field_info">key : <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchClone.Key">Lean.Meta.LazyDiscrTree.MatchClone.Key</a></div><div class="structure_field_doc"><p>Return root key for an entry.</p></div></li><li id="Lean.Meta.LazyDiscrTree.InitEntry.entry" class="structure_field"><div class="structure_field_info">entry : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.LazyEntry">Lean.Meta.LazyDiscrTree.LazyEntry</a> <span class="fn">α</span></span></div><div class="structure_field_doc"><p>Returns rest of entry for later insertion.</p></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitEntry.fromExpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L671-L676">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry.fromExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">fromExpr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(expr : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(value : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(config : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>
  <span class="fn">{ <span class="fn">iota</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">beta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">proj</span> := <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.ProjReductionKind.yesWithDelta">Lean.Meta.ProjReductionKind.yesWithDelta</a>, <span class="fn">zeta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">zetaDelta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span></span>)</span></span></div></div><p>Constructs an initial entry from an expression and value.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitEntry.fromExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L684-L688">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">mkSubEntry</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(e : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(idx : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(value : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(config : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>
  <span class="fn">{ <span class="fn">iota</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">beta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">proj</span> := <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.ProjReductionKind.yesWithDelta">Lean.Meta.ProjReductionKind.yesWithDelta</a>, <span class="fn">zeta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">zetaDelta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span></span>)</span></span></div></div><p>Creates an entry for a subterm of an initial entry.</p><p>This is slightly more efficient than using <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry.fromExpr">fromExpr</a></code> on subterms since it avoids a redundant call
to <code>whnf</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.Cache"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L709-L712">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Cache"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.Cache.mk"><li id="Lean.Meta.LazyDiscrTree.Cache.ngen" class="structure_field"><div class="structure_field_info">ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a></div></li><li id="Lean.Meta.LazyDiscrTree.Cache.core" class="structure_field"><div class="structure_field_info">core : <a href="../.././Lean/CoreM.html#Lean.Core.Cache">Lean.Core.Cache</a></div></li><li id="Lean.Meta.LazyDiscrTree.Cache.meta" class="structure_field"><div class="structure_field_info">meta : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.Cache">Lean.Meta.Cache</a></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.Cache" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.Cache.empty"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L714-L714">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Cache.empty"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span>.<span class="name">empty</span></a></span><span class="decl_args">
<span class="fn">(ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Cache">Lean.Meta.LazyDiscrTree.Cache</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.Cache.empty" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedInitResults"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L757-L758">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedInitResults</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instInhabitedInitResults</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">tree</span> := <span class="fn">{ <span class="fn">roots</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">tries</span> := <span class="fn">#[]</span> }</span>, <span class="fn">errors</span> := <span class="fn">#[]</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitResults.append"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L763-L766">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitResults.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">append</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(y : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span></div></div><p>Combine two initial results.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitResults.append" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L768-L769">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">instAppendInitResults</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Append">Append</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">append</span> := <span class="fn">Lean.Meta.LazyDiscrTree.InitResults.append</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.createImportedEnvironment"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L814-L842">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createImportedEnvironment"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedEnvironment</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a>)</span></span>
<span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span></span>)</span></span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(constantsPerTask : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#EIO">EIO</a> <a href="../.././Lean/Exception.html#Lean.Exception">Lean.Exception</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>)</span></span></div></div><p>Create an imported environment for tree.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.createImportedEnvironment" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.createImportedEnvironment.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/6fce8f7d5cd18a4419bca7fd51780c71c9b1cc5a/src/Lean/Meta/LazyDiscrTree.lean#L821-L836">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createImportedEnvironment.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedEnvironment</span>.<span class="name">go</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span></span>)</span></span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(constantsPerTask : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a>)</span></span>
<span class="decl_args">
<span class="fn">(tasks : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../.././Init/Core.html#Task">Task</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(start : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(cnt : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(idx : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#EIO">EIO</a> <a href="../.././Lean/Exception.html#Lean.Exception">Lean.Exception</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../.././Init/Core.html#Task">Task</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span>)</span></span>)</span></span></div></div><p>Allocate constants to tasks according to <code>constantsPerTask</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.createImportedEnvironment.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>