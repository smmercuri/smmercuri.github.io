{"name":"Lake.Build.Package","instances":[],"imports":["Init","Lake.Util.Git","Lake.Util.Sugar","Lake.Build.Common","Lake.Build.Targets"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L110-L115","name":"Lake.initPackageFacetConfigs","line":110,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.initPackageFacetConfigs","doc":"A package facet name to build function map that contains builders for\nthe initial set of Lake package facets (e.g., `extraDep`).\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.initPackageFacetConfigs\"><span class=\"name\">Lake</span>.<span class=\"name\">initPackageFacetConfigs</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Util/Name.html#Lake.DNameMap\">Lake.DNameMap</a> <a href=\"./Lake/Config/FacetConfig.html#Lake.PackageFacetConfig\">Lake.PackageFacetConfig</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L99-L103","name":"Lake.Package.afterReleaseSync","line":99,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.afterReleaseSync","doc":"Perform a build after first checking for a cloud release for the package. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.afterReleaseSync\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">afterReleaseSync</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Config/Package.html#Lake.Package\">Lake.Package</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Fetch.html#Lake.FetchM\">Lake.FetchM</a> <span class=\"fn\">(<span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.Job\">Lake.Job</a> <span class=\"fn\">α</span></span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L92-L96","name":"Lake.Package.afterReleaseAsync","line":92,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.afterReleaseAsync","doc":"Perform a build job after first checking for a cloud release for the package. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.afterReleaseAsync\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">afterReleaseAsync</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Config/Package.html#Lake.Package\">Lake.Package</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.Job\">Lake.Job</a> <span class=\"fn\">α</span></span>)</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Fetch.html#Lake.FetchM\">Lake.FetchM</a> <span class=\"fn\">(<span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.Job\">Lake.Job</a> <span class=\"fn\">α</span></span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L83-L89","name":"Lake.Package.releaseFacetConfig","line":83,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.releaseFacetConfig","doc":"The `PackageFacetConfig` for the builtin `releaseFacet`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.releaseFacetConfig\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">releaseFacetConfig</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Config/FacetConfig.html#Lake.PackageFacetConfig\">Lake.PackageFacetConfig</a> <a href=\"./Lake/Build/Facets.html#Lake.Package.releaseFacet\">Lake.Package.releaseFacet</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L79-L80","name":"Lake.Package.optReleaseFacetConfig","line":79,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.optReleaseFacetConfig","doc":"The `PackageFacetConfig` for the builtin `optReleaseFacet`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.optReleaseFacetConfig\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">optReleaseFacetConfig</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Config/FacetConfig.html#Lake.PackageFacetConfig\">Lake.PackageFacetConfig</a> <a href=\"./Lake/Build/Facets.html#Lake.Package.optReleaseFacet\">Lake.Package.optReleaseFacet</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L54-L76","name":"Lake.Package.fetchOptRelease","line":54,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.fetchOptRelease","doc":"Download and unpack the package's prebuilt release archive (from GitHub). "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.fetchOptRelease\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">fetchOptRelease</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Config/Package.html#Lake.Package\">Lake.Package</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Fetch.html#Lake.FetchM\">Lake.FetchM</a> <span class=\"fn\">(<span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L50-L51","name":"Lake.Package.extraDepFacetConfig","line":50,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.extraDepFacetConfig","doc":"The `PackageFacetConfig` for the builtin `dynlibFacet`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.extraDepFacetConfig\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">extraDepFacetConfig</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Config/FacetConfig.html#Lake.PackageFacetConfig\">Lake.PackageFacetConfig</a> <a href=\"./Lake/Build/Facets.html#Lake.Package.extraDepFacet\">Lake.Package.extraDepFacet</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L31-L47","name":"Lake.Package.recBuildExtraDepTargets","line":31,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.recBuildExtraDepTargets","doc":"Build the `extraDepTargets` for the package and its transitive dependencies.\nAlso fetch pre-built releases for the package's' dependencies.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.recBuildExtraDepTargets\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">recBuildExtraDepTargets</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Config/Package.html#Lake.Package\">Lake.Package</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Fetch.html#Lake.FetchM\">Lake.FetchM</a> <span class=\"fn\">(<span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L24-L25","name":"Lake.Package.depsFacetConfig","line":24,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.depsFacetConfig","doc":"The `PackageFacetConfig` for the builtin `depsFacet`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.depsFacetConfig\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">depsFacetConfig</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Config/FacetConfig.html#Lake.PackageFacetConfig\">Lake.PackageFacetConfig</a> <a href=\"./Lake/Build/Info.html#Lake.Package.depsFacet\">Lake.Package.depsFacet</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/lake/Lake/Build/Package.lean#L19-L21","name":"Lake.Package.recComputeDeps","line":19,"kind":"def","docLink":"./Lake/Build/Package.html#Lake.Package.recComputeDeps","doc":"Compute a topological ordering of the package's transitive dependencies. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Package.html#Lake.Package.recComputeDeps\"><span class=\"name\">Lake</span>.<span class=\"name\">Package</span>.<span class=\"name\">recComputeDeps</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Config/Package.html#Lake.Package\">Lake.Package</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Fetch.html#Lake.FetchM\">Lake.FetchM</a> <span class=\"fn\">(<span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lake/Config/Package.html#Lake.Package\">Lake.Package</a></span>)</span></span></div></div>"}]}